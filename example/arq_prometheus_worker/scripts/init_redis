#!/bin/sh -e

# Check if a Redis container is already running
RUNNING_CONTAINER=$(docker ps --filter 'name=redis' --format '{{.ID}}')
if [ -n "$RUNNING_CONTAINER" ]; then
  echo >&2 "A Redis container is already running. Please stop it before running this script."
  exit 1
fi

# Launch Redis using Docker
REDIS_CONTAINER_NAME="redis_$(date '+%s')"
REDIS_PORT="6379"

docker run \
  -p "${REDIS_PORT}:${REDIS_PORT}" \
  -d \
  --name "${REDIS_CONTAINER_NAME}" \
  redis:6

echo "Redis container '${REDIS_CONTAINER_NAME}' is now running on port ${REDIS_PORT}."
